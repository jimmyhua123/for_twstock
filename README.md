

# ğŸ“– README.md

## å°ˆæ¡ˆç°¡ä»‹

é€™å€‹å°ˆæ¡ˆçš„ç›®çš„æ˜¯ **è‡ªå‹•åŒ–å¾ FinMind API æŠ“å–å°è‚¡è³‡æ–™**ï¼Œä¸¦å°‡åŸå§‹è³‡æ–™æ¸…ç†æ•´ç†å¾Œï¼Œè¼¸å‡ºæˆé©åˆé€²ä¸€æ­¥åˆ†æï¼ˆä¾‹å¦‚æŠ€è¡“é¢ã€åŸºæœ¬é¢ã€ç±Œç¢¼é¢ã€è³‡é‡‘é¢ï¼‰çš„æ ¼å¼ã€‚

ç›®å‰æµç¨‹ï¼š

1. é€é **FinMind API v4** æŠ“å–æ—¥è³‡æ–™ï¼ˆæ¯æ—¥è‚¡åƒ¹ã€ä¸‰å¤§æ³•äººè²·è³£ã€èè³‡èåˆ¸ã€æœˆç‡Ÿæ”¶ç­‰ï¼‰ã€‚
2. å°‡ raw data å„²å­˜ç‚º **`_merged.csv`**ã€‚
3. é€²è¡Œæ¸…ç†èˆ‡æ­£è¦åŒ–ï¼š

   * çµ±ä¸€æ¬„ä½åç¨±èˆ‡æ—¥æœŸæ ¼å¼ã€‚
   * å°‡æ³•äººè²·è³£è³‡æ–™ï¼ˆé•·è¡¨ï¼‰è½‰æ›ç‚ºå¯¬è¡¨ï¼ˆå¤–è³‡ã€æŠ•ä¿¡ã€è‡ªç‡Ÿå•†è‡ªç‡Ÿã€é¿éšªï¼‰ã€‚
   * å»é‡ã€ç¼ºå€¼è™•ç†ã€‚
4. è¼¸å‡ºå…©ä»½æ¸…ç†å¾Œçš„æª”æ¡ˆï¼š

   * **`_clean_daily_wide.csv`**ï¼šå®Œæ•´å¯¬è¡¨ï¼ˆåƒ¹é‡ï¼‹æ³•äººç­‰å…¨éƒ¨æ¬„ä½ï¼‰ã€‚
   * **`_clean_daily_wide_min.csv`**ï¼šç²¾ç°¡ç‰ˆï¼Œåƒ…ä¿ç•™åˆ†ææœ€å¸¸ç”¨æ¬„ä½ã€‚

---

## æª”æ¡ˆèªªæ˜

* **`_merged.csv`**

  * FinMind æŠ“å›ä¸¦åˆæ­¥åˆä½µçš„åŸå§‹æª”ã€‚
  * æ¯å€‹æ—¥æœŸï¼‹è‚¡ç¥¨ä»£è™Ÿå¯èƒ½æœƒæœ‰å¤šç­†ï¼ˆå› æ³•äººç‚ºé•·è¡¨ï¼‰ã€‚

* **`_clean_daily_wide.csv`**

  * æ•´ç†å¾Œçš„å¯¬è¡¨ã€‚
  * æ¯å€‹æ—¥æœŸï¼‹è‚¡ç¥¨ä»£è™Ÿå”¯ä¸€ä¸€è¡Œã€‚
  * æ¬„ä½åŒ…å«å®Œæ•´åƒ¹é‡ã€æ³•äººè²·è³£ã€è¡ç”Ÿæ¬„ä½ç­‰ã€‚

* **`_clean_daily_wide_min.csv`**

  * ç²¾ç°¡ç‰ˆï¼Œæ¬„ä½å¦‚ä¸‹ï¼š

    * `date`ï¼šæ—¥æœŸ
    * `stock_id`ï¼šè‚¡ç¥¨ä»£è™Ÿ
    * `open, high, low, close`ï¼šè‚¡åƒ¹
    * `volume`ï¼šæˆäº¤é‡
    * `turnover`ï¼šæˆäº¤å€¼
    * `inst_foreign`ï¼šå¤–è³‡æ·¨è²·è³£è¶…
    * `inst_investment_trust`ï¼šæŠ•ä¿¡æ·¨è²·è³£è¶…
    * `inst_dealer_self`ï¼šè‡ªç‡Ÿå•†è‡ªç‡Ÿæ·¨è²·è³£è¶…
    * `inst_dealer_hedging`ï¼šè‡ªç‡Ÿå•†é¿éšªæ·¨è²·è³£è¶…

---

## ä½¿ç”¨æ–¹æ³•

### 1ï¸âƒ£ å®‰è£ç’°å¢ƒ

```bash
# å»ºè­°ä½¿ç”¨ Python 3.12
pip install pandas requests pyarrow
```

### 2ï¸âƒ£ æŠ“å–è³‡æ–™

```bash
python main.py \
  --token <ä½ çš„ FinMind token> \
  --stocks 2330,2317,2454 \
  --start 2024-01-01 \
  --end 2024-12-31 \
  --datasets TaiwanStockPrice,TaiwanStockInstitutionalInvestorsBuySell \
  --outdir ./output \
  --merge
```

### 3ï¸âƒ£ æ¸…ç†è¼¸å‡º

* è‡ªå‹•ç”¢ç”Ÿï¼š

  * `output/_merged.csv`
  * `output/_clean_daily_wide.csv`
  * `output/_clean_daily_wide_min.csv`

### 4ï¸âƒ£ æ“´å……åŸºæœ¬é¢èˆ‡å¸‚å ´ç†±åº¦æ¬„ä½

```bash
python -m finmind_fetch \
  --input finmind_out/_clean_daily_wide.csv \
  --fetch-fundamentals \
  --since 2024-01-01 \
  --finmind-token $FINMIND_TOKEN
```

é€™å€‹æ­¥é©Ÿæœƒé€é FinMind API æŠ“å–æœˆç‡Ÿæ”¶èˆ‡è²¡å ±è³‡æ–™ï¼Œè‡ªå‹•è¨ˆç®—
`revenue_yoy`ã€`revenue_mom`ã€`eps`ã€`eps_ttm` ç­‰æ¬„ä½ï¼ŒåŒæ™‚è¨ˆç®—å…¨å¸‚å ´çš„
`turnover_rank_pct`ã€`volume_rank_pct`ã€`volume_ratio`ã€`turnover_change_5d`ã€
`transactions_change_5d` ç­‰è³‡é‡‘ç†±åº¦æŒ‡æ¨™ï¼Œä¸¦æ›´æ–° `_clean_daily_wide.csv`
èˆ‡ `_clean_daily_wide_min.csv`ã€‚

### 5ï¸âƒ£ æª¢è¦–æ‘˜è¦

ç¨‹å¼æœƒåœ¨çµ‚ç«¯æ©Ÿè¼¸å‡ºï¼š

* è³‡æ–™ç¸½ç­†æ•¸
* è‚¡ç¥¨æ•¸é‡
* æ—¥æœŸç¯„åœ
* ç¼ºå€¼æ¯”ä¾‹
* éš¨æ©Ÿæ¨£æœ¬åˆ—

---

## æœªä¾†è¦åŠƒ

* [ ] åŠ å…¥æŠ€è¡“æŒ‡æ¨™ï¼ˆMA5ã€MA20ã€RSIã€MACDâ€¦ï¼‰ã€‚
* [ ] åŠ å…¥æ³•äººç´¯è¨ˆè²·è³£è¶…ï¼ˆ3æ—¥ / 5æ—¥ / 10æ—¥ï¼‰ã€‚
* [ ] ä¸²æ¥æ›´å¤š datasetï¼ˆèè³‡èåˆ¸ã€æœˆç‡Ÿæ”¶ã€è²¡å ±ï¼‰ã€‚
* [ ] å»ºç«‹è³‡æ–™åº«ï¼ˆSQLite / PostgreSQLï¼‰ç®¡ç†ã€‚
* [ ] è‡ªå‹•ç”¢ç”Ÿåœ–è¡¨èˆ‡å››å¤§é¢å‘åˆ†æå ±å‘Šã€‚

---

```bash
python -m analysis \
  --input ./finmind_out/_clean_daily_wide.csv \
  --outdir outputs \
  --with-charts \
  --html-report \
  --fetch-fundamentals \
  --since 2024-01-01
```
