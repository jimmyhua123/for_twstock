

# ğŸ“– FinMind å°è‚¡è³‡æ–™è‡ªå‹•åŒ–æµç¨‹

é€™å€‹å°ˆæ¡ˆæä¾›ä¸€å¥—è…³æœ¬èˆ‡æ¨¡çµ„ï¼Œå”åŠ©ä½ ä»¥ **FinMind API v4** ç‚ºä¾†æºï¼Œå¿«é€ŸæŠ“å–ã€æ•´ç†ä¸¦æ“´å……å°è‚¡è³‡æ–™ã€‚è¼¸å‡ºçš„è³‡æ–™å¯ç›´æ¥ç”¨æ–¼æŠ€è¡“é¢ã€åŸºæœ¬é¢ã€ç±Œç¢¼é¢èˆ‡è³‡é‡‘é¢ç­‰å¾ŒçºŒåˆ†æã€‚

## âœ¨ æ ¸å¿ƒèƒ½åŠ›

* ä¸€æ¬¡æŠ“å›æŒ‡å®šè‚¡ç¥¨ã€æ™‚é–“å€é–“èˆ‡å¤šå€‹ dataset çš„åŸå§‹è³‡æ–™ã€‚
* è‡ªå‹•åˆä½µã€æ¸…ç†æ¬„ä½èˆ‡æ—¥æœŸæ ¼å¼ï¼Œä¸¦å°‡æ³•äººé•·è¡¨è½‰æ›æˆå¯¬è¡¨ã€‚
* ç”¢ç”Ÿå®Œæ•´æ¬„ä½èˆ‡ç²¾ç°¡æ¬„ä½å…©ç¨® CSVï¼Œæ–¹ä¾¿ä¸åŒåˆ†ææƒ…å¢ƒä½¿ç”¨ã€‚
* é€éé¡å¤–çš„æŒ‡ä»¤æ“´å……åŸºæœ¬é¢ã€è²¡å ±èˆ‡å¸‚å ´ç†±åº¦æŒ‡æ¨™ã€‚

## ğŸ” å·¥ä½œæµç¨‹

1. å¾ FinMind API æŠ“å–æ—¥è³‡æ–™ï¼ˆè‚¡åƒ¹ã€æ³•äººè²·è³£ã€èè³‡èåˆ¸ã€æœˆç‡Ÿæ”¶ç­‰ï¼‰ã€‚
2. å°‡åŸå§‹è³‡æ–™æ•´åˆç‚º `_merged.csv`ã€‚
3. é€²è¡Œæ¬„ä½çµ±ä¸€ã€å»é‡ã€ç¼ºå€¼è™•ç†ï¼Œä¸¦è¼¸å‡ºï¼š
   * `_clean_daily_wide.csv`ï¼šå®Œæ•´å¯¬è¡¨è³‡æ–™ã€‚
   * `_clean_daily_wide_min.csv`ï¼šå¸¸ç”¨æ¬„ä½ç²¾ç°¡ç‰ˆã€‚
4. ï¼ˆé¸ç”¨ï¼‰å†åŸ·è¡Œ `finmind_fetch` æ¨¡çµ„ï¼Œæ–°å¢è²¡å ±ã€æœˆç‡Ÿæ”¶èˆ‡å¸‚å ´ç†±åº¦æ¬„ä½ã€‚

## ğŸ“ ä¸»è¦è¼¸å‡ºæª”æ¡ˆ

| æª”å | å…§å®¹é‡é» |
| --- | --- |
| `_merged.csv` | FinMind å›å‚³å¾Œçš„åˆæ­¥åˆä½µæª”ï¼Œæ—¥æœŸï¼‹è‚¡ç¥¨ä»£è™Ÿå¯èƒ½æœ‰å¤šç­†è³‡æ–™ã€‚ |
| `_clean_daily_wide.csv` | æ¸…ç†å¾Œçš„å¯¬è¡¨ï¼Œæ¯å€‹æ—¥æœŸï¼‹è‚¡ç¥¨ä»£è™Ÿå”¯ä¸€ä¸€åˆ—ï¼ŒåŒ…å«åƒ¹é‡ã€æ³•äººèˆ‡è¡ç”Ÿæ¬„ä½ã€‚ |
| `_clean_daily_wide_min.csv` | ç²¾ç°¡æ¬„ä½ç‰ˆï¼Œä¿ç•™ `date`, `stock_id`, `open/high/low/close`, `volume`, `turnover`, `inst_foreign`, `inst_investment_trust`, `inst_dealer_self`, `inst_dealer_hedging` ç­‰å¸¸ç”¨æŒ‡æ¨™ã€‚ |

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å®‰è£ä¾è³´

```bash
# å»ºè­°ä½¿ç”¨ Python 3.12
pip install pandas requests pyarrow
```

### 2. æŠ“å–è³‡æ–™

```bash
python main.py \
  --token <ä½ çš„ FinMind token> \
  --stocks 2330,2317,2454 \
  --start 2024-01-01 \
  --end 2024-12-31 \
  --datasets TaiwanStockPrice,TaiwanStockInstitutionalInvestorsBuySell \
  --outdir ./output \
  --merge
```

å®Œæˆå¾Œæœƒç”Ÿæˆä¸‹åˆ—æª”æ¡ˆï¼š

* `output/_merged.csv`
* `output/_clean_daily_wide.csv`
* `output/_clean_daily_wide_min.csv`

### 3. æ“´å……åŸºæœ¬é¢èˆ‡å¸‚å ´ç†±åº¦æ¬„ä½ï¼ˆé¸ç”¨ï¼‰

```bash
python -m finmind_fetch \
  --input finmind_out/_clean_daily_wide.csv \
  --fetch-fundamentals \
  --since 2024-01-01 \
  --finmind-token $FINMIND_TOKEN
```

åŸ·è¡Œå¾Œå°‡é€é FinMind API å–å¾—æœˆç‡Ÿæ”¶èˆ‡è²¡å ±è³‡æ–™ï¼Œè‡ªå‹•è¨ˆç®— `revenue_yoy`ã€`revenue_mom`ã€`eps`ã€`eps_ttm` ç­‰åŸºæœ¬é¢æ¬„ä½ï¼Œä»¥åŠ `turnover_rank_pct`ã€`volume_rank_pct`ã€`volume_ratio`ã€`turnover_change_5d`ã€`transactions_change_5d` ç­‰è³‡é‡‘ç†±åº¦æŒ‡æ¨™ã€‚çµæœæœƒå›å¯«è‡³ `_clean_daily_wide.csv` èˆ‡ `_clean_daily_wide_min.csv`ã€‚

### 4. æª¢è¦–æ‘˜è¦

æµç¨‹çµæŸå¾Œï¼Œçµ‚ç«¯æ©Ÿæœƒè¼¸å‡ºè³‡æ–™ç¸½ç­†æ•¸ã€è‚¡ç¥¨æ•¸é‡ã€æ—¥æœŸç¯„åœã€ç¼ºå€¼æ¯”ä¾‹èˆ‡éš¨æ©Ÿæ¨£æœ¬åˆ—ï¼Œå¹«åŠ©ä½ å¿«é€Ÿç¢ºèªè³‡æ–™å“è³ªã€‚

## ğŸ§­ å¾ŒçºŒè¦åŠƒ

* [ ] åŠ å…¥å¸¸è¦‹æŠ€è¡“æŒ‡æ¨™ï¼ˆMA5ã€MA20ã€RSIã€MACDâ€¦ï¼‰ã€‚
* [ ] æä¾›æ³•äººç´¯è¨ˆè²·è³£è¶…ï¼ˆ3/5/10 æ—¥ï¼‰ã€‚
* [ ] ä¸²æ¥æ›´å¤š FinMind datasetï¼ˆèè³‡èåˆ¸ã€æœˆç‡Ÿæ”¶ã€è²¡å ±ç­‰ï¼‰ã€‚
* [ ] å»ºç«‹ SQLite / PostgreSQL ç­‰è³‡æ–™åº«å„²å­˜æ¨¡å¼ã€‚
* [ ] è‡ªå‹•ç”¢ç”Ÿåœ–è¡¨èˆ‡å››å¤§é¢å‘çš„åˆ†æå ±å‘Šã€‚

## ğŸ“Š é€²éšåˆ†æç¯„ä¾‹

```bash
python -m analysis \
  --input ./finmind_out/_clean_daily_wide.csv \
  --outdir outputs \
  --with-charts \
  --html-report \
  --fetch-fundamentals \
  --since 2024-01-01
```

ä»¥ä¸Šå‘½ä»¤æœƒè¼¸å‡ºåœ–è¡¨ã€HTML å ±å‘Šï¼Œä¸¦å¯é¸æ“‡åŒæ™‚æ›´æ–°åŸºæœ¬é¢è³‡æ–™ã€‚
